<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Berita — Mading Digital</title>
  <link rel="stylesheet" href="css/berita.css">
</head>
<body>

  <!-- NAVBAR -->
  <header class="site-header">
    <div class="brand">
      <h1>Mading Digital</h1>
      <p class="tag">MAN Insan Cendekia Bengkulu Tengah</p>
    </div>
    <nav>
      <a href="index.html">Beranda</a>
      <a href="berita.html" class="active">Berita</a>
      <a href="lomba.html">Info Lomba</a>
      <a href="galeri.html">Galeri</a>
      <a href="aspirasi.html">Aspirasi</a>
    </nav>
  </header>
  
  <main class="container">
    <section class="galeri-header">
      <h2>Berita Sekolah</h2>
      <p>Berita dan pengumuman terbaru dari sekolah</p>
    </section>

    <section id="list-berita" class="galeri-grid"></section>
  </main>

  <footer class="site-footer">
    &copy; 2025 Mading Digital MAN Insan Cendekia Bengkulu Tengah
  </footer>

  <!-- MODAL DETAIL -->
  <div id="brModal" class="gl-modal hidden">
    <div class="gl-panel">
      <button class="gl-close" id="brClose">✕</button>

      <img id="brImage" class="gl-image" src="">
      
      <div class="gl-content">
        <h2 id="brTitle"></h2>
        <div id="brDesc" class="gl-desc"></div>
      </div>
    </div>
  </div>

  <script src="js/app.js"></script>

  <script>
  (function(){
    const list = document.getElementById('list-berita');
    const modal = document.getElementById('brModal');
    const brImage = document.getElementById('brImage');
    const brTitle = document.getElementById('brTitle');
    const brDesc = document.getElementById('brDesc');
    const brClose = document.getElementById('brClose');

    function getData(){
      try{
        const raw = localStorage.getItem('madingData');
        if(!raw) return [];
        return JSON.parse(raw).berita || [];
      }catch(e){
        return [];
      }
    }

    function firstImage(g){
      if(!g) return '';
      if(Array.isArray(g)) return g[0] || '';
      if(typeof g === 'string') return g;
      return '';
    }

    function render(){
      const items = getData();
      if(!items.length){
        list.innerHTML = "<p style='opacity:.6'>Belum ada berita.</p>";
        return;
      }

      list.innerHTML = items.map((it,i)=>`
        <article class="galeri-card" data-i="${i}">
          <img src="${firstImage(it.gambar) || ''}" alt="${(it.judul||'')}">
          <div class="galeri-overlay">
            <h4>${it.judul || ''}</h4>
          </div>
        </article>
      `).join("");

      document.querySelectorAll('.galeri-card').forEach(card=>{
        card.onclick = ()=>{
          const data = items[card.dataset.i];
          brImage.src = firstImage(data.gambar) || '';
          brTitle.textContent = data.judul || '';
          brDesc.innerHTML = data.isi || 'Tidak ada isi';
          modal.classList.remove('hidden');
        }
      });
    }

    brClose.onclick = ()=> modal.classList.add('hidden');
    modal.onclick = e=>{ if(e.target===modal) modal.classList.add('hidden'); };

    render();
  })();
  </script>

</body>
</html>
